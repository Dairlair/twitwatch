---
# See https://goswagger.io/tutorial/custom-server.html
# See https://github.com/go-swagger/go-swagger/blob/master/examples/composed-auth/swagger.yml
# See https://mean-dev.info/authentication-rest-api-swagger/
# See https://habr.com/ru/company/lamoda/blog/463301/
swagger: '2.0'
info:
  version: '0.0.1'
  title: Tweetwatch Server  
consumes:
  - application/json
produces:
  - application/json
paths:
  /signup:
    post:
      operationId: signup
      parameters:
        - name: user
          in: body
          description: New User
          required: true
          schema:
            $ref: '#/definitions/User'
      responses:
        "200":
          description: User created
          schema:
            $ref: "#/definitions/GeneralResponse"
        "422":
          description: Email already taken
          schema:
            $ref: "#/definitions/GeneralResponse"
        # responses may fall through to errors
        default:
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"
  /login:
    get:
      operationId: login
      security:
        - Basic: []
      responses:
        "200":
          description: Log In
          schema:
            $ref: "#/definitions/Token"
        # responses may fall through to errors
        default:
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"
  /hello:
    get:
      produces:
        - text/plain
      parameters:
        - name: name
          required: false
          type: string
          in: query
          description: defaults to World if not given
      operationId: getGreeting
      responses:
        200:
          description: returns a greeting
          schema:
            type: string
            description: contains the actual greeting as plain text
definitions:
  User:
    properties:
      email:
        type: string
      password:
        type: string
        format: password
    required:
      - email
      - password
  Token:
    properties:
      user:
        type: string
      token:
        type: string
    required:
      - user
      - token
  GeneralResponse:
    properties:
      message:
        type: string
    required:
      - message
  ErrorResponse:
    properties:
      message:
        type: string
    required:
      - message
# Default Security requirements for all operations
security:
  - isRegistered: []
securityDefinitions:
  Basic:
    type: basic
  JWT:
    type: apiKey
    name: Authorization
    in: header